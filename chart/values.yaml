appName: belajar-istio

domain: istio.local

services:
  - name: auth
    isPublic: true
    path: /auth
    container:
      image: rizalord/istio-auth-service:latest
      port: 
        service: 
          - 3000
        container: 
          http: 3000
      env:
        - name: USER_SERVICE_HOST
          value: user-service
        - name: USER_SERVICE_PORT
          value: 3001
    resources:
      requests:
        cpu: "100m"
        memory: "256Mi"
      limits:
        cpu: "500m"
        memory: "512Mi"

  - name: user
    isPublic: false
    path: null
    container:
      image: rizalord/istio-user-service:latest
      port: 
        service: 
          - 3003
          - 3001
        container: 
          http: 3003
          tcp: 3001
      env: 
        - name: NODE_ENV
          value: production
    resources:
      requests:
        cpu: "100m"
        memory: "256Mi"
      limits:
        cpu: "500m"
        memory: "512Mi"

  - name: analytic
    isPublic: true
    path: /analytic
    container:
      image: rizalord/istio-analytic-service:latest
      port: 
        service: 
          - 3002
        container: 
          http: 3002
      env:
        - name: USER_SERVICE_HOST
          value: user-service
        - name: USER_SERVICE_PORT
          value: 3001
    resources:
      requests:
        cpu: "100m"
        memory: "256Mi"
      limits:
        cpu: "500m"
        memory: "512Mi"

